<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piano Allenamento Mezza Maratona</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .race-date {
            color: #95a5a6;
            font-size: 0.9em;
            margin-bottom: 20px;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
            font-size: 0.9em;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid;
        }

        .easy { background: #8fed8f4d; border-color: #28a745 !important; }
        .long { background: #80007f4d; border-color: #6c757d !important; }
        .intervals { background: #ffff004d; border-color: #ffc107 !important; }
        .tempo { background: #ffa6004d; border-color: #fd7e14 !important; }
        .race { background: #f8d7da; border-color: #dc3545 !important; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th {
            background: #34495e;
            color: white;
            padding: 12px;
            text-align: center;
            border: 1px solid #2c3e50;
            font-weight: 600;
        }

        th:first-child {
            text-align: left;
            width: 100px;
        }

        td {
            border: 1px solid #ddd;
            padding: 8px;
            vertical-align: center;
            min-height: 100px;
        }

        td:first-child {
            background: #ecf0f1;
            font-weight: bold;
            text-align: center;
        }

        .workout {
            padding: 10px;
            border-radius: 6px;
            border: 2px solid;
            min-height: 110px;
        }

        .workout-type {
            font-weight: bold;
            margin-bottom: 6px;
            font-size: 0.95em;
        }

        .workout-details {
            font-size: 0.85em;
            line-height: 1.4;
        }

        .workout-km {
            font-weight: bold;
            color: #2c3e50;
        }

        .workout-time {
            color: #34495e;
        }

        .workout-pace {
            color: #7f8c8d;
            font-style: italic;
        }

        .workout-desc {
            color: #5a6c7d;
            font-style: italic;
            margin-top: 4px;
        }

        .rest {
            text-align: center;
            color: #95a5a6;
            padding: 40px 0;
            font-style: italic;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #2c3e50;
        }

        @media (max-width: 1200px) {
            .container {
                padding: 15px;
            }
            
            table {
                font-size: 0.85em;
            }

            .workout {
                min-height: 90px;
            }
        }
    /* Responsive mobile rules for viewport < 992px */
    @media (max-width: 991.98px) {
      body {
        padding: 10px;
      }

      .container {
        padding: 12px;
        border-radius: 6px;
      }

      h1 {
        font-size: 1.4em;
        margin-bottom: 6px;
      }

      .subtitle { font-size: 0.95em; }
      .race-date { font-size: 0.85em; }

      .legend {
        flex-direction: column;
        gap: 8px;
        font-size: 0.9em;
      }

      .legend-box { width: 16px; height: 16px; }

      /* Make the table behave like stacked cards on narrow screens */
      table, thead, tbody, th, td, tr { display: block; width: 100%; }
      thead { display: none; }

      tr {
        margin-bottom: 12px;
        background: #ffffff;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 10px;
      }

      td {
        border: none;
        padding: 6px 0;
        text-align: center; /* centra orizzontalmente il contenuto di ogni cella */
        /* centro anche verticalmente usando flexbox */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 64px; /* spazio minimo per centrare verticalmente */
      }

      /* Color the Week cell same bluish used for desktop table header and center it */
      td:first-child {
        background: #34495e;
        color: #fff;
        font-weight: 700;
        text-align: center;
        padding: 8px;
        border-radius: 6px;
        margin-bottom: 8px;
      }

      /* Add day labels above workouts using CSS only (mobile-only), centered */
      /* td indices: 1=Week, 2=Mar(tue), 3=Mer(wed), 4=Ven(fri), 5=Dom(sun), 6=KM */
      td:nth-child(2)::before { content: "Mar"; display: block; font-weight: 700; color: #34495e; margin-bottom: 6px; text-align: center; }
      td:nth-child(3)::before { content: "Mer"; display: block; font-weight: 700; color: #34495e; margin-bottom: 6px; text-align: center; }
      td:nth-child(4)::before { content: "Ven"; display: block; font-weight: 700; color: #34495e; margin-bottom: 6px; text-align: center; }
      td:nth-child(5)::before { content: "Dom"; display: block; font-weight: 700; color: #34495e; margin-bottom: 6px; text-align: center; }
      /* Add KM tot label above the last (KM total) column */
      td:nth-child(6)::before { content: "KM tot"; display: block; font-weight: 700; color: #34495e; margin-bottom: 6px; text-align: center; }

      /* Center workout content */
      .workout { text-align: center; }

      .workout {
        min-height: auto;
        padding: 8px;
        width: 100%;
      }

      .workout-type { font-size: 0.95em; }
      .workout-details { font-size: 0.85em; }

      .stats {
        grid-template-columns: 1fr;
        gap: 12px;
        padding: 12px;
      }

      #kmChart { height: 180px; }
    }
    </style>
</head>
<body>
    <div class="container">
        <h1>Piano Allenamento Mezza Maratona</h1>
        <div class="subtitle">16 settimane - Target: 1h27m-1h32m (4:10-4:20/km)</div>
        <!--<div class="race-date">Gara: Domenica 29 Marzo 2026</div>-->

        <div class="legend">
            <div class="legend-item">
                <div class="legend-box easy"></div>
                <span>Corsa facile</span>
            </div>
            <div class="legend-item">
                <div class="legend-box long"></div>
                <span>Lungo</span>
            </div>
            <div class="legend-item">
                <div class="legend-box intervals"></div>
                <span>Ripetute</span>
            </div>
            <div class="legend-item">
                <div class="legend-box tempo"></div>
                <span>Corto veloce/Tempo</span>
            </div>
            <div class="legend-item">
                <div class="legend-box race"></div>
                <span>Gara/Time Trial</span>
            </div>
        </div>

        <div style="overflow-x: auto;">
            <table id="trainingTable"></table>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">Durata</div>
                <div class="stat-value" id="durata"></div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Lunghezza massima</div>
                <div class="stat-value" id="maxkm"></div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Km Tot</div>
                <div class="stat-value" id="km"></div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Target gara</div>
                <div class="stat-value">4:10-4:20/km</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Tempo previsto</div>
                <div class="stat-value">1h27m-1h32m</div>
            </div>
        </div>
        <canvas id="kmChart" style="width:100%;height:260px"></canvas>

    </div>

    <script>
        const schedule = [
            {
                week: 1,
                tue: { type: "Corsa facile", km: "12km", time: "1h00m-1h10m", pace: "≤5:10/km" },
                wed: { type: "Ripetute", km: "11.8km", time: "1h0m-1h20m", details: "4km risc. + riposo 90s + 6x(400m @3:40 + riposo 60s) + riposo 90s + 6x(400m @3:40 + riposo 60s) + riposo 90s + 3km defat." },
                fri: { type: "Corto veloce", km: "11km", time: "50m-55m", details: "4km risc. + 2km@4:50 + 2km@4:40 + 2km@4:25 + 2km@4:15 + riposo 90s + 1.5km defat." },
                sun: { type: "Lungo", km: "17km", time: "1h20m-1h30m", details: "17km a passo conversazionale" }
            },
            {
                week: 2,
                tue: { type: "Corsa facile", km: "14km", time: "1h10m-1h20m", pace: "≤5:10/km" },
                wed: { type: "Corto veloce", km: "12.9km", time: "1h0m-1h10m", details: "4km risc. + 8x(400m @4:05 + 400m @4:50) + riposo 90s + 2.5km defat." },
                fri: { type: "Corsa facile", km: "13km", time: "1h0m-1h10m", pace: "≤5:10/km" },
                sun: { type: "Lungo", km: "17km", time: "1h10m-1h30m", details: "6km @5:00 + 5.5km @4:50 + 4.5km @4:30 + 1km conversazionale" }
            },
            {
                week: 3,
                tue: { type: "Corsa facile", km: "15km", time: "1h10m-1h20m", pace: "≤5:10/km" },
                wed: { type: "Corto veloce", km: "13km", time: "1h0m-1h10m", details: "4km risc. + 10x(300m @4:05 + 300m @4:55) + riposo 90s + 3km defat." },
                fri: { type: "Ripetute", km: "13km", time: "1h10m-1h20m", details: "3.2km risc. + 200m @3:30 + 400m @3:35 + 800m @3:50 + 1.2km @4:00 + 1.6km @4:05 + 1.2km @4:00 + 800m @3:50 + 400m @3:35 + 200m @3:30 (riposi 60-120s) + 3km defat." },
                sun: { type: "Lungo", km: "18km", time: "1h30m-1h40m", details: "18km a passo conversazionale" }
            },
            {
                week: 4,
                tue: { type: "Corsa facile", km: "10km", time: "50m-55m", pace: "≤5:10/km" },
                wed: { type: "Corto veloce", km: "9km", time: "45m-50m", details: "1.5km risc. + 3km @4:20 + riposo 180s + 2km @4:10 + riposo 120s + 1km @4:05 + riposo 90s + 1.5km defat." },
                fri: { type: "Corsa facile", km: "10km", time: "50m-55m", pace: "≤5:10/km" },
                sun: { type: "Lungo", km: "11km", time: "55m-1h0m", details: "11km a passo conversazionale" }
            },
            {
                week: 5,
                tue: { type: "Corsa facile", km: "15km", time: "1h10m-1h20m", pace: "≤5:10/km" },
                wed: { type: "Ripetute", km: "13km", time: "1h0m-1h20m", details: "3km risc. + riposo 90s + 8x(1km @4:00 + riposo 90s) + 2km defat." },
                fri: { type: "Corto veloce", km: "13km", time: "1h0m-1h10m", details: "2.5km risc. + 4x(2km @4:10 + riposo 120s) + 2.5km defat." },
                sun: { type: "Lungo", km: "19km", time: "1h30m-1h40m", details: "19km a passo conversazionale" }
            },
            {
                week: 6,
                tue: { type: "Corsa facile", km: "15km", time: "1h10m-1h20m", pace: "≤5:10/km" },
                wed: { type: "Corto veloce", km: "13km", time: "1h0m-1h10m", details: "2.5km risc. + 2x(4km @4:15 + riposo 180s) + 2.5km defat." },
                fri: { type: "Corsa facile", km: "14km", time: "1h10m-1h20m", pace: "≤5:10/km" },
                sun: { type: "Lungo", km: "20km", time: "1h30m-1h50m", details: "11.5km conversazionale + 1km @4:05 + 7.5km conversazionale" }
            },
            {
                week: 7,
                tue: { type: "Corsa facile", km: "15km", time: "1h10m-1h20m", pace: "≤5:05/km" },
                wed: { type: "Corto veloce", km: "13km", time: "55m-1h10m", details: "2.5km risc. + 4x(1km @4:25 + 1km @4:10) + riposo 90s + 2.5km defat." },
                fri: { type: "Ripetute", km: "13km", time: "1h10m-1h20m", details: "3.2km risc. + 200m @3:25 + 400m @3:35 + 800m @3:50 + 1.2km @4:00 + 1.6km @4:05 + 1.2km @4:00 + 800m @3:50 + 400m @3:35 + 200m @3:25 (riposi 60-120s) + 3km defat." },
                sun: { type: "Lungo", km: "21.1km", time: "1h40m-1h50m", details: "Mezza maratona a passo conversazionale" }
            },
            {
                week: 8,
                tue: { type: "Corsa facile", km: "12km", time: "1h0m-1h10m", pace: "≤5:05/km" },
                wed: { type: "Corto veloce", km: "9km", time: "40m-45m", details: "1.5km risc. + 2km @4:05 + 2km @4:45 + 2km @4:05 + riposo 90s + 1.5km defat." },
                fri: { type: "Corsa facile", km: "11km", time: "55m-1h0m", pace: "≤5:05/km" },
                sun: { type: "Lungo", km: "12km", time: "1h0m-1h10m", details: "12km a passo conversazionale" }
            },
            {
                week: 9,
                tue: { type: "Corsa facile", km: "15km", time: "1h10m-1h20m", pace: "≤5:05/km" },
                wed: { type: "Ripetute", km: "13km", time: "1h10m-1h20m", details: "3km risc. + riposo 90s + 4x(800m @3:45 + riposo 90s) + riposo 60s + 8x(400m @3:40 + riposo 60s) + riposo 60s + 4x(200m @3:30 + riposo 30s) + riposo 60s + 2.8km defat." },
                fri: { type: "Corto veloce", km: "13km", time: "55m-1h10m", details: "1.5km risc. + 3km @4:40 + 3km @4:25 + 2km @4:15 + 2km @4:05 + riposo 90s + 1.5km defat." },
                sun: { type: "Lungo", km: "22km", time: "1h50m-2h0m", details: "22km a passo conversazionale" }
            },
            {
                week: 10,
                tue: { type: "Corsa facile", km: "15km", time: "1h10m-1h20m", pace: "≤5:05/km" },
                wed: { type: "Corto veloce", km: "12.9km", time: "1h0m-1h10m", details: "4km risc. + 8x(400m @4:00 + 400m @4:45) + riposo 90s + 2.5km defat." },
                fri: { type: "Corsa facile", km: "14km", time: "1h10m-1h20m", pace: "≤5:05/km" },
                sun: { type: "Lungo", km: "23km", time: "1h40m-2h0m", details: "4km conversazionale + 6km @4:15 (HM target) + 4km conversazionale + 5km @4:15 (HM target) + 4km conversazionale" }
            },
            {
                week: 11,
                tue: { type: "Corsa facile", km: "15km", time: "1h10m-1h20m", pace: "≤5:05/km" },
                wed: { type: "Corto veloce", km: "13km", time: "1h0m-1h10m", details: "4km risc. + 10x(300m @4:00 + 300m @4:50) + riposo 90s + 3km defat." },
                fri: { type: "Ripetute", km: "13km", time: "1h0m-1h20m", details: "4km risc. + riposo 90s + 4x(1.2km @3:55 + riposo 120s + 400m @3:35 + riposo 60s) + 2.6km defat." },
                sun: { type: "Lungo", km: "24km", time: "1h50m-2h10m", details: "24km a passo conversazionale" }
            },
            {
                week: 12,
                tue: { type: "Corsa facile", km: "12km", time: "1h0m-1h10m", pace: "≤5:05/km" },
                wed: { type: "Cronometro", km: "9.1km", time: "35m-40m", details: "1km risc. + riposo 120s + 8.05km prova tempo @4:00/km" },
                fri: { type: "Corsa facile", km: "12km", time: "1h0m-1h10m", pace: "≤5:05/km" },
                sun: { type: "Lungo", km: "13km", time: "1h0m-1h10m", details: "13km a passo conversazionale" }
            },
            {
                week: 13,
                tue: { type: "Corsa facile", km: "15km", time: "1h10m-1h20m", pace: "≤5:05/km" },
                wed: { type: "Ripetute", km: "12.8km", time: "1h0m-1h20m", details: "2.4km risc. (+ 4 scatti 10s) + riposo 90s + 7x(1km @3:50 + 200m @3:30 + riposo 120s) + 2km defat." },
                fri: { type: "Corto veloce", km: "13km", time: "1h0m-1h10m", details: "1.5km risc. + 4km @4:10 + riposo 210s + 3km @4:10 + riposo 180s + 2km @4:00 + riposo 120s + 1km @3:55 + riposo 90s + 1.5km defat." },
                sun: { type: "Lungo", km: "22km", time: "1h40m-2h0m", details: "22km a passo conversazionale" }
            },
            {
                week: 14,
                tue: { type: "Corsa facile", km: "14km", time: "1h10m-1h20m", pace: "≤5:00/km" },
                wed: { type: "Corto veloce", km: "10km", time: "45m-50m", details: "2km risc. + 6km @4:10 + riposo 180s + 2km defat." },
                fri: { type: "Corsa facile", km: "13km", time: "1h0m-1h10m", pace: "≤5:00/km" },
                sun: { type: "Lungo", km: "17km", time: "1h10m-1h30m", details: "5km conversazionale + 5km @4:35 + 5.5km @4:15 (HM target) + 1.5km conversazionale" }
            },
            {
                week: 15,
                tue: { type: "Corsa facile", km: "12km", time: "1h0m-1h10m", pace: "≤5:00/km" },
                wed: { type: "Ripetute", km: "9km", time: "45m-55m", details: "1.6km risc. + riposo 90s + 8x(800m @3:45 + riposo 90s) + 1km defat." },
                fri: { type: "Corto veloce", km: "8km", time: "35m-40m", details: "1km risc. + 3x(1km @4:35 + 1km @3:55) + riposo 90s + 1km defat." },
                sun: { type: "Lungo", km: "13km", time: "1h0m-1h10m", details: "13km a passo conversazionale" }
            },
            {
                week: 16,
                tue: { type: "Corsa facile", km: "8km", time: "40m-45m", pace: "≤5:00/km" },
                wed: { type: "Scarico", km: "8km", time: "40m-45m", details: "3km risc. (+ 4 scatti 100m @3:45) + riposo 60s + 4x(1km @4:15 HM pace + riposo 90s) + 1km defat." },
                sun: { type: "GARA", km: "21.1km", time: "1h27m-1h32m", details: "MEZZA MARATONA - Target 4:10-4:20/km" }
            }
        ];
        function getTypeClass(type) {
            if (type === "Corsa facile") return "easy";
            if (type === "Lungo") return "long";
            if (type === "Ripetute" || type === "Ripetute di scarico") return "intervals";
            if (type === "Corto veloce" || type === "Scarico") return "tempo";
            if (type === "Gara" || type === "Cronometro") return "race";
            return "easy";
        }

        function renderTable() {
            const table = document.getElementById('trainingTable');
            let html='<thead><tr><th style="text-align:center;">Week</th><th>Mar</th><th>Mer</th><th>Ven</th><th>Dom</th><th>KM</th></tr></thead><tbody>';


            schedule.forEach(week => {
                html += `<tr><td>Week ${week.week}</td>`;
                
                let tot=0;
                ['tue','wed','fri','sun'].forEach(d=>{
                if(week[d]){
                tot+=parseFloat(week[d].km);
                const w=week[d],c=getTypeClass(w.type);
                html+=`<td><div class="workout ${c}"><div class="workout-type">${w.type}</div><div class="workout-details"><div class="workout-km">${w.km}</div><div class="workout-time">${w.time}</div>${w.pace?`<div class="workout-pace">${w.pace}</div>`:''}${w.details?`<div class="workout-desc">${w.details}</div>`:''}</div></div></td>`;
                }else html+='<td><div class="rest">Riposo</div></td>';
                });
                html+=`<td><b>${tot}km</b></td></tr>`;
            });

            html += '</tbody>';
            table.innerHTML = html;
        }

        renderTable();

        function renderChart(){
            const c=kmChart.getContext('2d'),w=kmChart.width=kmChart.offsetWidth,h=kmChart.height=260,
            d=schedule.map(w=>['mon','tue','wed','thu','fri','sat','sun'].reduce((t,k)=>t+(w[k]?parseFloat(w[k].km):0),0)),
            min=Math.min(...d),max=Math.max(...d),p=40;
            c.clearRect(0,0,w,h);
            c.strokeStyle="#ddd";c.fillStyle="#7f8c8d";c.font="12px sans-serif";
            for(let i=0;i<=5;i++){let y=h-p-i*(h-2*p)/5;let v=Math.round(min+(max-min)*i/5);
            c.beginPath();c.moveTo(p,y);c.lineTo(w,y);c.stroke();c.fillText(v+" km",5,y+4)}
            c.strokeStyle="#34495e";c.lineWidth=2;c.beginPath();
            d.forEach((v,i)=>{let x=p+i*(w-p)/(d.length-1),y=h-p-((v-min)/(max-min))*(h-2*p);i?c.lineTo(x,y):c.moveTo(x,y)});
            c.stroke();
            c.fillStyle="#34495e";
            d.forEach((v,i)=>{let x=p+i*(w-p)/(d.length-1),y=h-p-((v-min)/(max-min))*(h-2*p);
            c.beginPath();c.arc(x,y,3,0,6.28);c.fill();c.fillText(i+1,x-3,h-10)});
        }

        renderChart();

    function renderStats(){
      // Durata (numero di settimane)
      durata.textContent = schedule.length + " settimane";

      // Lunghezza massima (massimo km in un singolo allenamento)
      maxkm.textContent = Math.max(...schedule.flatMap(w => Object.values(w).filter(v => v.km).map(v => parseFloat(v.km)))) + " km";

      // Km totali: somma di tutti i km specificati (tue/wed/fri/sun)
      const totalKm = schedule
        .flatMap(w => Object.values(w)
          .filter(v => v && v.km)
          .map(v => parseFloat(v.km)))
        .reduce((a, b) => a + b, 0);

      // Arrotonda il totale a numero intero (es. 899 invece di 899.56546)
      const roundedKm = Math.round(totalKm);

      // Imposta il valore nel DOM (elemento con id "km")
      const kmEl = document.getElementById('km');
      if (kmEl) kmEl.textContent = roundedKm + " km";
    }
    renderStats();

    </script>
</body>
</html>