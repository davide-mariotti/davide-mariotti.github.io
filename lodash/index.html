<!DOCTYPE html>
<html>
<head>
  <title>Filter Example</title>
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.20/lodash.min.js"></script>
</head>
<body>
  <input type="checkbox" id="filter-age">
  <label for="filter-age">Filter by age</label>

  <label for="filter-city">Filter by city</label>
  <select id="filter-city">
    <option value="all">All</option>
    <option value="New York">New York</option>
    <option value="Los Angeles">Los Angeles</option>
    <option value="Chicago">Chicago</option>
    <option value="Houston">Houston</option>
    <option value="Philadelphia">Philadelphia</option>
  </select>

  <label for="filter-gender">Filter by Gender</label>
  <select id="filter-gender">
    <option value="all">All</option>
    <option value="male">male</option>
    <option value="female">female</option>
  </select>
  
  <label for="filter-job">Filter by Job</label>
  <select id="filter-job">
    <option value="all">All</option>
    <option value="engineer">engineer</option>
    <option value="teacher">teacher</option>
    <option value="doctor">doctor</option>
    <option value="scientist">scientist</option>
  </select>
  
  <div id="result"></div>

  <script>
const data = [
      { name: 'John', age: 25, city: 'New York', gender: 'male', job: 'engineer' },
      { name: 'Jane', age: 30, city: 'Los Angeles', gender: 'female', job: 'teacher' },
      { name: 'Bob', age: 35, city: 'Chicago', gender: 'male', job: 'scientist' },
      { name: 'Alice', age: 40, city: 'Houston', gender: 'female', job: 'doctor' },
      { name: 'Mike', age: 28, city: 'Philadelphia', gender: 'male', job: 'engineer' }
    ];

    function filterData() {
      const ageCheckbox = document.getElementById('filter-age');
      const citySelect = document.getElementById('filter-city');
      const genderSelect = document.getElementById('filter-gender');
      const jobSelect = document.getElementById('filter-job');
      const result = document.getElementById('result');
      let filteredData = data;
      if (ageCheckbox.checked) {
        //filter all the people who are older than 30 
        filteredData = _.filter(filteredData, item => item.age > 30);
      }
      if (citySelect.value !== 'all') {
        //filter by city
        filteredData = _.filter(filteredData, item => item.city === citySelect.value);
      }
      if (genderSelect.value !== 'all') {
        //filter by gender
        filteredData = _.filter(filteredData, item => item.gender === genderSelect.value);
      }
      if (jobSelect.value !== 'all') {
        //filter by job
        filteredData = _.filter(filteredData, item => item.job === jobSelect.value);
      }
      // check if no filters are selected
      if (!ageCheckbox.checked && citySelect.value === 'all' && genderSelect.value === 'all' && jobSelect.value === 'all') {
        filteredData = data;
      }
      // clear the result before displaying new data
      result.innerHTML = '';
      filteredData.forEach(item => {
        // create a new div element
        const div = document.createElement('div');
        // create a text node to store the data
        const text = document.createTextNode(`Name: ${item.name}, Age: ${item.age}, City: ${item.city}, Gender: ${item.gender}, Job: ${item.job}`);
        // append the text node to the div
        div.appendChild(text);
        // append the div to the result
        result.appendChild(div);
      });
    }
    window.onload = function() {
      const ageCheckbox = document.getElementById('filter-age');
      const citySelect = document.getElementById('filter-city');
      const genderSelect = document.getElementById('filter-gender');
      const jobSelect = document.getElementById('filter-job');
      ageCheckbox.addEventListener("change", filterData);
      citySelect.addEventListener("change", filterData);
      genderSelect.addEventListener("change", filterData);
      jobSelect.addEventListener("change", filterData);
    }
  </script>
</body>
</html>